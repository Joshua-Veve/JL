<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library Management System - Academic City University</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Header -->
  <header class="header" id="main-header" aria-hidden="true">
    <div class="header-content">
      <div class="header-title">
        <i class="fas fa-book-reader"></i>
        <h1>Academic City University Library</h1>
      </div>
      <div class="header-actions">
        <span id="current-user" class="user-greeting"></span>
        <button class="logout-btn" onclick="logout()" aria-label="Logout">
          <i class="fas fa-sign-out-alt"></i> Logout
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Login/Register Section -->
    <section id="auth-section" class="auth-section" aria-labelledby="auth-title">
      <div class="auth-container">
        <div class="auth-header">
          <i class="fas fa-university auth-icon"></i>
          <h2 id="auth-title" class="auth-title">Library Management System</h2>
          <p class="auth-subtitle">Access your library resources and manage your borrowings</p>
        </div>
        
        <div class="tabs" role="tablist">
          <button class="tab active" id="login-tab" onclick="showTab('login')" 
                  role="tab" aria-selected="true" aria-controls="login-form">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
          <button class="tab" id="register-tab" onclick="showTab('register')" 
                  role="tab" aria-selected="false" aria-controls="register-form">
            <i class="fas fa-user-plus"></i> Register
          </button>
        </div>
        
        <div class="tab-content">
          <form id="login-form-content" class="auth-form" role="tabpanel" aria-labelledby="login-tab">
            <div class="form-group">
              <label for="login-email">
                <i class="fas fa-envelope"></i> Email Address
              </label>
              <input type="email" id="login-email" placeholder="student@academiccity.edu" required 
                     aria-required="true" autocomplete="email">
            </div>
            <div class="form-group">
              <label for="login-password">
                <i class="fas fa-lock"></i> Password
              </label>
              <div class="password-input">
                <input type="password" id="login-password" placeholder="Enter your password" required 
                       aria-required="true" autocomplete="current-password">
                <button type="button" class="toggle-password" aria-label="Show password">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
            </div>
            <button type="submit" class="btn-primary">
              <i class="fas fa-sign-in-alt"></i> Sign In
            </button>
            <p class="auth-note">Use 'admin@library.com' for admin access</p>
          </form>
          
          <form id="register-form-content" class="auth-form" style="display: none;" 
                role="tabpanel" aria-labelledby="register-tab" aria-hidden="true">
            <div class="form-group">
              <label for="reg-fullname">
                <i class="fas fa-user"></i> Full Name
              </label>
              <input type="text" id="reg-fullname" placeholder="John Doe" required 
                     aria-required="true" autocomplete="name">
            </div>
            <div class="form-group">
              <label for="reg-email">
                <i class="fas fa-envelope"></i> Email Address
              </label>
              <input type="email" id="reg-email" placeholder="student@academiccity.edu" required 
                     aria-required="true" autocomplete="email">
            </div>
            <div class="form-group">
              <label for="reg-password">
                <i class="fas fa-lock"></i> Password
              </label>
              <div class="password-input">
                <input type="password" id="reg-password" placeholder="Minimum 8 characters" required 
                       aria-required="true" autocomplete="new-password">
                <button type="button" class="toggle-password" aria-label="Show password">
                  <i class="fas fa-eye"></i>
                </button>
              </div>
              <small class="password-hint">Must be at least 8 characters with letters and numbers</small>
            </div>
            <button type="submit" class="btn-primary">
              <i class="fas fa-user-plus"></i> Create Account
            </button>
          </form>
        </div>
      </div>
    </section>

    <!-- Student Dashboard -->
    <section id="student-dashboard" style="display: none;" aria-labelledby="dashboard-title">
      <div class="dashboard-container">
        <div class="dashboard-header">
          <h2 id="dashboard-title">
            <i class="fas fa-tachometer-alt"></i> My Dashboard
          </h2>
          <div class="dashboard-summary">
            <p>Welcome back, <span id="student-name"></span></p>
            <p class="last-login" id="last-login"></p>
          </div>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-book"></i>
            </div>
            <div class="stat-content">
              <h3>Books Borrowed</h3>
              <p id="borrowed-count" class="stat-number">0</p>
            </div>
          </div>
          <div class="stat-card due-soon">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <h3>Due Soon</h3>
              <p id="due-count" class="stat-number">0</p>
              <small class="stat-note">Within 3 days</small>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-history"></i>
            </div>
            <div class="stat-content">
              <h3>Reading History</h3>
              <p id="history-count" class="stat-number">0</p>
            </div>
          </div>
        </div>
        
        <section class="search-section" aria-labelledby="search-title">
          <h3 id="search-title">
            <i class="fas fa-search"></i> Search Books
          </h3>
          <div class="search-form">
            <div class="search-filters">
              <div class="form-group">
                <label for="search-title-input">Title</label>
                <input type="text" id="search-title-input" placeholder="Enter book title">
              </div>
              <div class="form-group">
                <label for="search-author">Author</label>
                <input type="text" id="search-author" placeholder="Enter author name">
              </div>
              <div class="form-group">
                <label for="search-category">Category</label>
                <select id="search-category">
                  <option value="">All Categories</option>
                  <option value="Computer Science">Computer Science</option>
                  <option value="Engineering">Engineering</option>
                  <option value="Mathematics">Mathematics</option>
                  <option value="Business">Business</option>
                  <option value="Literature">Literature</option>
                </select>
              </div>
            </div>
            <button onclick="searchBooks()" class="btn-primary">
              <i class="fas fa-search"></i> Search Books
            </button>
            <button onclick="clearSearch()" class="btn-secondary">
              <i class="fas fa-times"></i> Clear
            </button>
          </div>
        </section>
        
        <section class="books-section" aria-labelledby="available-books-title">
          <div class="section-header">
            <h3 id="available-books-title">
              <i class="fas fa-books"></i> Available Books
            </h3>
            <span id="book-count" class="count-badge">0 books</span>
          </div>
          <div id="book-list" class="books-grid" role="list" aria-label="List of available books"></div>
        </section>
        
        <section class="borrowed-section" aria-labelledby="borrowed-books-title">
          <div class="section-header">
            <h3 id="borrowed-books-title">
              <i class="fas fa-bookmark"></i> My Borrowed Books
            </h3>
            <span id="borrowed-total" class="count-badge">0 books</span>
          </div>
          <div id="borrowed-list" class="books-grid" role="list" aria-label="List of borrowed books"></div>
        </section>
      </div>
    </section>

    <!-- Admin Panel -->
    <section id="admin-panel" style="display: none;" aria-labelledby="admin-title">
      <div class="admin-container">
        <div class="admin-header">
          <h2 id="admin-title">
            <i class="fas fa-cogs"></i> Admin Panel
          </h2>
          <p class="admin-subtitle">Manage library resources and monitor borrowing activity</p>
        </div>
        
        <div class="admin-tabs" role="tablist">
          <button class="admin-tab active" onclick="showAdminTab('manage-books')" 
                  role="tab" aria-selected="true">
            <i class="fas fa-book"></i> Manage Books
          </button>
          <button class="admin-tab" onclick="showAdminTab('borrowing-records')" 
                  role="tab" aria-selected="false">
            <i class="fas fa-clipboard-list"></i> Borrowing Records
          </button>
          <button class="admin-tab" onclick="showAdminTab('users')" 
                  role="tab" aria-selected="false">
            <i class="fas fa-users"></i> User Management
          </button>
        </div>
        
        <div class="admin-content">
          <div id="manage-books-tab" role="tabpanel">
            <div class="admin-actions">
              <button onclick="showAddBookForm()" class="btn-success">
                <i class="fas fa-plus-circle"></i> Add New Book
              </button>
              <button onclick="exportBooks()" class="btn-secondary">
                <i class="fas fa-download"></i> Export Catalog
              </button>
            </div>
            
            <div class="add-book-form" id="add-book-form-section" style="display: none;">
              <h3><i class="fas fa-book-medical"></i> Add New Book</h3>
              <form id="add-book">
                <div class="form-row">
                  <div class="form-group">
                    <label for="book-title">Title *</label>
                    <input type="text" id="book-title" placeholder="Enter book title" required>
                  </div>
                  <div class="form-group">
                    <label for="book-author">Author *</label>
                    <input type="text" id="book-author" placeholder="Enter author name" required>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="book-isbn">ISBN *</label>
                    <input type="text" id="book-isbn" placeholder="e.g., 978-3-16-148410-0" required>
                  </div>
                  <div class="form-group">
                    <label for="book-category">Category *</label>
                    <select id="book-category" required>
                      <option value="">Select Category</option>
                      <option value="Computer Science">Computer Science</option>
                      <option value="Engineering">Engineering</option>
                      <option value="Mathematics">Mathematics</option>
                      <option value="Business">Business</option>
                      <option value="Literature">Literature</option>
                    </select>
                  </div>
                </div>
                <div class="form-row">
                  <div class="form-group">
                    <label for="book-copies">Copies Available</label>
                    <input type="number" id="book-copies" placeholder="Number of copies" min="1" value="1">
                  </div>
                  <div class="form-group">
                    <label for="book-location">Shelf Location</label>
                    <input type="text" id="book-location" placeholder="e.g., A-12">
                  </div>
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn-primary">
                    <i class="fas fa-save"></i> Add Book
                  </button>
                  <button type="button" onclick="hideAddBookForm()" class="btn-secondary">
                    Cancel
                  </button>
                </div>
              </form>
            </div>
            
            <div class="books-section">
              <div class="section-header">
                <h3><i class="fas fa-books"></i> Library Catalog</h3>
                <div class="catalog-stats">
                  <span id="total-books">Total: 0 books</span>
                  <span id="available-copies">Available: 0 copies</span>
                </div>
              </div>
              <div id="admin-book-list" class="books-grid" role="list" aria-label="Library catalog"></div>
            </div>
          </div>
          
          <div id="borrowing-records-tab" style="display: none;" role="tabpanel" aria-hidden="true">
            <div class="records-header">
              <h3><i class="fas fa-clipboard-list"></i> Borrowing Records</h3>
              <div class="records-filters">
                <select id="filter-status" onchange="filterRecords()">
                  <option value="all">All Status</option>
                  <option value="active">Active Loans</option>
                  <option value="overdue">Overdue</option>
                  <option value="returned">Returned</option>
                </select>
              </div>
            </div>
            <div id="admin-borrowed-list" class="records-table-container">
              <table class="records-table" aria-label="Borrowing records">
                <thead>
                  <tr>
                    <th>Book</th>
                    <th>Borrower</th>
                    <th>Borrow Date</th>
                    <th>Due Date</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="records-table-body">
                  <!-- Records will be populated here -->
                </tbody>
              </table>
            </div>
          </div>
          
          <div id="users-tab" style="display: none;" role="tabpanel" aria-hidden="true">
            <h3><i class="fas fa-users"></i> User Management</h3>
            <div id="users-list" class="users-grid">
              <!-- Users will be populated here -->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Toast Notification -->
    <div id="toast" class="toast" aria-live="polite" aria-atomic="true"></div>

    <!-- Loading Overlay -->
    <div id="loading" class="loading-overlay" style="display: none;">
      <div class="loading-spinner"></div>
      <p>Loading...</p>
    </div>
  </main>

  <script src="script.js"></script>
</body>
</html>